<!DOCTYPE html>
<html lang="en">
    <style>
        /* Logo w nagłówku */
        .nav-logo {
            position: absolute;
            left: 5%;
            width: 3vw;
            height: auto;
            transition: transform 0.3s ease;
        }
        .nav-logo:hover {
            transform: scale(1.1);
        }
    
        /* Dostosowanie dla mobile */
        @media (max-width: 768px) {
            .nav-logo {
                width: 15vw;
            }
        }
    </style>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Sklep - ActiveRP</title>
        <link rel="stylesheet" href="https://kit-pro.fontawesome.com/releases/v6.4.0/css/pro.min.css">
        <link rel="stylesheet" href="style.css"></link>
        <link rel="shortcut icon" href="https://cdn.discordapp.com/icons/1202725243714797628/4eeb5df5f4bce2ef219abdde03bfb7df.webp?size=2048&format=webp" type="image/png">
        <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css"/>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
    </head>
    <body>
        <div class="loading">
            <div class="bg"></div>
            <img src="https://cdn.discordapp.com/icons/1202725243714797628/4eeb5df5f4bce2ef219abdde03bfb7df.webp?size=2048&format=webp">
            <span>ŁADOWANIE</span>
            <div class="progress">
                <div class="bar1"></div>
                <div class="bar2"></div>
            </div>
        </div>
        <div id="root">
            <div class="navbar" data-aos="slide-down" data-aos-duration="1000">
                <img src="https://cdn.discordapp.com/icons/1202725243714797628/4eeb5df5f4bce2ef219abdde03bfb7df.webp?size=2048&format=webp" alt="logo" class="nav-logo">
                <div class="buttons">
                    <div class="button">
                        <a href="./indeks.html">STRONA GŁÓWNA</a>
                    </div>
                    <div class="button">
                        <a href="https://discord.gg/4p4T7QXAJC">DISCORD</a>
                    </div>
                    <div class="button selected">
                        <a href="./sklep.html">SKLEP</a>
                    </div>
                    <div class="button" onclick="contact()">KONTAKT</div>
                    <div class="button">
                        <a href="./regulamin.html">REGULAMIN SERWERA</a>
                    </div>
                </div>
                <i class="fa fa-bars" onclick="toggleNavbar()"></i>
            </div>
            <div class="content">
                <div class="shop-section-1">
                    <h1>SKLEP</h1>
                    
                    <div class="categories">
                        <div class="category selected" onclick="changeCategory('all')">
                            <span>Wszystkie</span>
                        </div>
                        <div class="category" onclick="changeCategory('coinsy')">
                            <span>Coinsy</span>
                        </div>
                        <div class="category" onclick="changeCategory('unbany')">
                            <span>UnBany</span>
                        </div>
                        <div class="category" onclick="changeCategory('bilety')">
                            <span>Bilety VIP</span>
                        </div>
                        <div class="category" onclick="changeCategory('pozostale')">
                            <span>Pozostałe</span>
                        </div>
                    </div>
                    
                    <div class="shop-container">
                        <!-- Coinsy -->
                        <div class="item coinsy">
                            <img src="https://indrop.eu/assets/img/oslorp/products/oslo-coins_270000__icon.png?v=D872D" alt="100 Coinsów">
                            <div class="price">9.99 zł</div>
                            <div class="label">100 Coinsów</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">100 coinsów do wykorzystania na dodatki w grze</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('coins100')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <div class="item coinsy">
                            <img src="https://indrop.eu/assets/img/oslorp/products/oslo-coins_270000__icon.png?v=D872D" alt="250 Coinsów">
                            <div class="price">19.99 zł</div>
                            <div class="label">250 Coinsów</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">250 coinsów do wykorzystania na dodatki w grze</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('coins250')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <div class="item coinsy">
                            <img src="https://indrop.eu/assets/img/oslorp/products/oslo-coins_270000__icon.png?v=D872D" alt="500 Coinsów">
                            <div class="price">34.99 zł</div>
                            <div class="label">500 Coinsów</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">500 coinsów do wykorzystania na dodatki w grze</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('coins500')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <div class="item coinsy">
                            <img src="https://indrop.eu/assets/img/oslorp/products/oslo-coins_270000__icon.png?v=D872D" alt="1000 Coinsów">
                            <div class="price">59.99 zł</div>
                            <div class="label">1000 Coinsów</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">1000 coinsów do wykorzystania na dodatki w grze</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('coins1000')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <!-- UnBany -->
                        <div class="item unbany">
                            <img src="https://indrop.eu/assets/img/oslorp/products/unban-7-dni__icon.png?v=D872D" alt="UnBan 7 dni">
                            <div class="price">29.99 zł</div>
                            <div class="label">UnBan (7 dni)</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Odbanowanie konta po banie 7-dniowym</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('unban7')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <div class="item unbany">
                            <img src="https://indrop.eu/assets/img/oslorp/products/unban-7-dni__icon.png?v=D872D" alt="UnBan 30 dni">
                            <div class="price">49.99 zł</div>
                            <div class="label">UnBan (30 dni)</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Odbanowanie konta po banie 30-dniowym</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('unban30')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <div class="item unbany">
                            <img src="https://indrop.eu/assets/img/oslorp/products/unban-7-dni__icon.png?v=D872D" alt="UnBan permanentny">
                            <div class="price">79.99 zł</div>
                            <div class="label">UnBan (permanentny)</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Odbanowanie konta po banie permanentnym</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('unbanperm')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <!-- Bilety VIP -->
                        <div class="item bilety">
                            <img src="https://indrop.eu/assets/img/oslorp/products/bilet-i-stopnia__icon.png?v=D872D" alt="Bilet VIP 7 dni">
                            <div class="price">19.99 zł</div>
                            <div class="label">Bilet VIP (7 dni)</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Szybsze wejście na serwer przez 7 dni</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('vip7')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <div class="item bilety">
                            <img src="https://indrop.eu/assets/img/oslorp/products/bilet-i-stopnia__icon.png?v=D872D" alt="Bilet VIP 30 dni">
                            <div class="price">39.99 zł</div>
                            <div class="label">Bilet VIP (30 dni)</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Szybsze wejście na serwer przez 30 dni</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('vip30')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <div class="item bilety">
                            <img src="https://indrop.eu/assets/img/oslorp/products/bilet-i-stopnia__icon.png?v=D872D" alt="Bilet VIP 90 dni">
                            <div class="price">89.99 zł</div>
                            <div class="label">Bilet VIP (90 dni)</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Szybsze wejście na serwer przez 90 dni</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('vip90')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <!-- Pozostałe -->
                        <div class="item pozostale">
                            <img src="https://indrop.eu/assets/img/oslorp/products/limitka-odblokowana__icon.png?v=D872D" alt="Pojazd VIP">
                            <div class="price">49.99 zł</div>
                            <div class="label">Pojazd VIP</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Ekskluzywny pojazd tylko dla darczyńców</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('vipcar')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <div class="item pozostale">
                            <img src="https://r2.fivemanage.com/ZBnX4tlMjVFd8dh11FY5w/DOM.png" alt="Dom VIP">
                            <div class="price">69.99 zł</div>
                            <div class="label">Dom VIP</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Ekskluzywny dom z dodatkowymi funkcjami</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('viphouse')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <div class="item pozostale">
                            <img src="https://indrop.eu/assets/img/oslorp/products/wlasny-numer-telefonu__icon.png?v=D872D" alt="Skin VIP">
                            <div class="price">29.99 zł</div>
                            <div class="label">Skin VIP</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Unikalny skin postaci</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('vipskin')">
                                KUP TERAZ
                            </div>
                        </div>
                        
                        <div class="item pozostale">
                            <img src="https://indrop.eu/assets/img/oslorp/products/druga-postac__icon.png?v=D872D" alt="Zmiana wyglądu">
                            <div class="price">19.99 zł</div>
                            <div class="label">Zmiana wyglądu</div>
                            <div class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Możliwość zmiany wyglądu swojej postaci</span>
                            </div>
                            <div class="buy-button" onclick="openDetails('changechar')">
                                KUP TERAZ
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Przed footerem -->
                <div class="footer-spacer"></div>

                <footer>
                 <!-- zawartość footera -->
                </footer>

                <div class="footer">
                    <img src="https://cdn.discordapp.com/icons/1202725243714797628/4eeb5df5f4bce2ef219abdde03bfb7df.webp?size=2048&format=webp" alt="logo" class="logo">
                    <span class="copyright-text">Copyright © 2025 ActiveRP. All rights reserved.</span>
                    <div class="socials">
                        <div class="social">
                            <a href="https://discord.gg/4p4T7QXAJC" target="_blank">
                                <i class="fa-brands fa-discord"></i>
                            </a>
                        </div>
                        <div class="social">
                            <a href="https://www.youtube.com/@activerp" target="_blank">
                                <i class="fa-brands fa-youtube"></i>
                            </a>
                        </div>
                        <div class="social">
                            <a href="https://www.tiktok.com/@activerp" target="_blank">
                                <i class="fa-brands fa-tiktok"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Popup z detalami produktu -->
        <div class="shop-details-popup">
            <div class="container">
                <i class="fas fa-x" onclick="closeDetails()"></i>
                <img src="https://indrop.eu/assets/img/oslorp/products/oslo-coins_270000__icon.png?v=D872D" alt="Produkt"> 
                <h1>Nazwa produktu</h1>
                <h3>Cena: 10 PLN</h3>
                <div class="right">
                    <form>
                      <input type="text" placeholder="Nick w grze" required>
                      <input type="text" placeholder="ID postaci" required>
                      <select required>
                            <option value="" disabled selected>Wybierz metodę płatności</option>
                            <option value="paypal">PayPal</option>
                            <option value="blik">BLIK</option>
                            <option value="przelew">Przelew bankowy</option>
                        </select>
                        <button type="submit">POTWIERDŹ ZAKUP</button>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="contact-popup">
            <div class="container">
                <div class="close" onclick="closePopup()">
                    <i class="fas fa-x"></i>
                </div>
                <h1>Aby się z nami skontaktować</h1>
                <span>
                    • Wejdź na naszego <a href="https://discord.gg/4p4T7QXAJC" target="_blank">discorda</a>
                    i otwórz ticket.
                </span>
                <span>
                    • Napisz do nas maila: <a target="_blank">kontakt@activerp.pl</a>
                </span>
            </div>
        </div>
        
        <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
        <script>
            (function() {
                function c() {
                    var b = a.contentDocument || a.contentWindow.document;
                    if (b) {
                        var d = b.createElement('script');
                        d.innerHTML = "window.__CF$cv$params={r:'8bcf885a0920c414',t:'MTcyNTMwMTQyMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
                        b.getElementsByTagName('head')[0].appendChild(d)
                    }
                }
                if (document.body) {
                    var a = document.createElement('iframe');
                    a.height = 1;
                    a.width = 1;
                    a.style.position = 'absolute';
                    a.style.top = 0;
                    a.style.left = 0;
                    a.style.border = 'none';
                    a.style.visibility = 'hidden';
                    document.body.appendChild(a);
                    if ('loading' !== document.readyState)
                        c();
                    else if (window.addEventListener)
                        document.addEventListener('DOMContentLoaded', c);
                    else {
                        var e = document.onreadystatechange || function() {}
                        ;
                        document.onreadystatechange = function(b) {
                            e(b);
                            'loading' !== document.readyState && (document.onreadystatechange = e,
                            c())
                        }
                    }
                }
            }
            )();
        </script>
        
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-2D9KFCJZRR"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('js', new Date());
            gtag('config', 'G-2D9KFCJZRR');
        </script>
        
        <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
        <script type="text/javascript" src="app.js"></script>
        
        <script>
// Funkcje zarządzania sklepem
function changeCategory(category) {
    // Usuń selekcję ze wszystkich kategorii
    document.querySelectorAll('.category').forEach(el => {
        el.classList.remove('selected');
    });
    
    // Zaznacz aktualną kategorię
    event.currentTarget.classList.add('selected');
    
    // Ukryj wszystkie produkty
    document.querySelectorAll('.item').forEach(el => {
        el.style.display = 'none';
    });
    
    // Pokaż odpowiednie produkty
    if (category === 'all') {
        document.querySelectorAll('.item').forEach(el => {
            el.style.display = 'inline-block';
        });
    } else {
        document.querySelectorAll(`.item.${category}`).forEach(el => {
            el.style.display = 'inline-block';
        });
    }
}

function openDetails(product) {
    const popup = document.querySelector('.shop-details-popup');
    const container = popup.querySelector('.container');
    const item = event.currentTarget.closest('.item');
    
    // Wypełnij popup danymi produktu
    container.querySelector('img').src = item.querySelector('img').src;
    container.querySelector('h1').textContent = item.querySelector('.label').textContent;
    container.querySelector('h3').textContent = item.querySelector('.price').textContent;
    container.querySelector('form').dataset.productId = product;
    
    // Reset formularza i pokaż popup
    container.querySelector('form').reset();
    popup.style.display = 'block';
}

function closeDetails() {
    document.querySelector('.shop-details-popup').style.display = 'none';
}

// System powiadomień
function showMessage(type, message) {
    // Usuń istniejące komunikaty
    removeExistingMessages();
    
    // Stwórz nowy komunikat
    const messageElement = createMessageElement(type, message);
    
    // Dodaj do DOM i skonfiguruj automatyczne zniknięcie
    document.body.appendChild(messageElement);
    setupMessageAutoHide(messageElement);
}

function removeExistingMessages() {
    document.querySelectorAll('.error-message, .success-message').forEach(msg => msg.remove());
}

function createMessageElement(type, message) {
    const messageElement = document.createElement('div');
    messageElement.className = `${type}-message`;
    
    // Dodaj ikonę
    const icon = document.createElement('i');
    icon.className = type === 'error' 
        ? 'fas fa-exclamation-circle' 
        : 'fas fa-check-circle';
    messageElement.appendChild(icon);
    
    // Dodaj tekst
    const text = document.createElement('span');
    text.textContent = message;
    messageElement.appendChild(text);
    
    return messageElement;
}

function setupMessageAutoHide(messageElement) {
    // Automatyczne ukrycie po 5 sekundach
    const autoHideTimer = setTimeout(() => {
        hideMessage(messageElement);
    }, 5000);
    
    // Ręczne zamknięcie na kliknięcie
    messageElement.addEventListener('click', () => {
        clearTimeout(autoHideTimer);
        hideMessage(messageElement);
    });
}

function hideMessage(element) {
    element.style.animation = 'fadeOut 0.5s ease-in forwards';
    setTimeout(() => element.remove(), 500);
}

// Obsługa płatności i integracja z FiveM
document.querySelector('.shop-details-popup form').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const form = e.target;
    const formData = getFormData(form);
    
    if (!validateFormData(formData)) {
        showMessage('error', 'Proszę wypełnić wszystkie wymagane pola!');
        return;
    }
    
    try {
        await processPayment(form, formData);
    } catch (error) {
        handlePaymentError(form, error);
    }
});

function getFormData(form) {
    return {
        nick: form.querySelector('input[type="text"]:nth-of-type(1)').value,
        characterId: form.querySelector('input[type="text"]:nth-of-type(2)').value,
        productId: form.dataset.productId,
        paymentMethod: form.querySelector('select').value,
        amount: form.closest('.container').querySelector('h3').textContent
    };
}

function validateFormData(data) {
    return data.nick && data.characterId && data.paymentMethod;
}

async function processPayment(form, data) {
    const submitButton = form.querySelector('button[type="submit"]');
    const originalText = submitButton.innerHTML;
    
    // Ustaw stan ładowania
    submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Przetwarzanie...';
    submitButton.disabled = true;
    
    // Wyślij żądanie
    const response = await fetch('process_payment.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
    });
    
    const result = await response.json();
    
    // Przywróć przycisk
    submitButton.innerHTML = originalText;
    submitButton.disabled = false;
    
    if (result.success) {
        showMessage('success', 'Płatność zakończona sukcesem! Produkt zostanie dostarczony.');
        closeDetails();
        form.reset();
    } else {
        showMessage('error', result.message || 'Wystąpił nieoczekiwany błąd. Spróbuj ponownie.');
    }
}

function handlePaymentError(form, error) {
    const submitButton = form.querySelector('button[type="submit"]');
    submitButton.innerHTML = 'POTWIERDŹ ZAKUP';
    submitButton.disabled = false;
    
    showMessage('error', `Błąd połączenia: ${error.message}`);
    console.error('Payment error:', error);
}

// Inicjalizacja sklepu
window.onload = function() {
    document.querySelectorAll('.item').forEach(el => {
        el.style.display = 'inline-block';
    });
};
        </script>
    </body>
</html>